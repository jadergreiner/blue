# # Aula 16 - [AULA] SQL - Parte 1

## Conte√∫dos

1. Conceitos iniciais de bancos de dados

2. Bancos relacionais

3. Bancos n√£o relacionais

4. Modelagem de dados

5. Criando nosso banco e executando os primeiros comandos

## Conceitos iniciais de bancos de dados

Bem-vindo ao m√≥dulo 4. Parab√©ns pela jornada. 

Nesta semana vamos tratar de um tema muito interessante. O nosso querido "SQL". Ser√° uma semana muito legal, cheia de desafios e aprendizado.

Os exemplos utilizados foram realizados e capturados no MySQL Workbench. Segue o link para download (https://dev.mysql.com/downloads/mysql/).

Procure pelo MySQL Workbench na vers√£o Community.

Na instala√ß√£o, recomendamos selecionar o tipo Custom, para selecionarmos os produtos que vamos instalar. 


<img src="./imagens/Install-01.png">

:exclamation:Voc√™ ir√° encontrar nos documentos complementares orienta√ß√µes de instala√ß√£o.

Quando falamos de Banco de dados, precisamos voltar aos registros f√≠sicos de bibliotecas. Pense nos neg√≥cios em geral, registros policiais, fichas de pacientes, registros de estoque e tamb√©m entradas e sa√≠das de pessoas e materiais em um pr√©dio ou pavilh√£o. Esse resgate √© importante, pois foi l√° que tudo come√ßou.

Estes registros eram individualizados, mantinha-se um hist√≥rico muito longo de informa√ß√µes e tamb√©m uma metodologia de indexa√ß√£o e recupera√ß√£o da informa√ß√£o quando se precisava dela. Mas n√£o vamos nos alongar muito, mas fica o convite para quem quiser pesquisar mais sobre o assunto. 

Os Bancos de dados como conhecemos hoje, o modelo relacional, √© uma teoria matem√°tica desenvolvida por Edgar Frank Codd. Ele desceve como as bases de dados devem funcionar. E veja bem, estamos falando de de um per√≠odo entre 1960-1970. 

<img src = "https://www.ecured.cu/images/4/4a/EdgarFCood.jpeg">

Mas me conta a√≠, voc√™ sabia disso :bowtie: ? 

Caso queira conhecer um pouco mais sobre o criado do modelo relacional, pode come√ßar por aqui: :arrow_right: <a href="https://pt.wikipedia.org/wiki/Edgar_Frank_Codd" target="_blank"> Edgar Frank Codd </a>

Bancos de dados ou bases de dados s√£o conjuntos de arquivos relacionados entre si com registros sobre pessoas, lugares ou coisas. S√£o cole√ß√µes organizadas de dados que se relacionam de forma a criar algum sentido (informa√ß√£o). S√£o de vital import√¢ncia para empresas e se tornaram a principal pe√ßa dos sistemas de informa√ß√£o e seguran√ßa.

<img src = "https://www.homehost.com.br/blog/wp-content/uploads/2019/02/o-que-e-mysql1.jpg">

:pushpin: Agora um ponto de reflex√£o para debatermos em aula! 

Quando falamos em Dados e informa√ß√µes. Estou falando a mesma coisa‚ùì

Os bancos de dados s√£o operados pelos Sistemas Gerenciadores de Bancos de Dados (SGBD), que surgiram na d√©cada de 1970. Outro tipo not√°vel √© o SGBD Orientado a Objetos, implementado em bancos dados com estruturas complexas ou aplica√ß√µes que mudam constantemente.

Por volta de 1976, o Dr. Peter Chen prop√µe o modelo Entidade-Relacionamento (ER) para objetos de bancos de dados, dando uma nova e importante percep√ß√£o dos conceitos de modelos de dados. 

![image](https://user-images.githubusercontent.com/87602063/166435298-133f5f0b-3073-4aea-a889-907064d64185.png)


Na metodo dos anos 80, a linguagem de SQL se torna um padr√£o mundial :grin:.

Pela metade dos anos 90 come√ßa a explos√£o das vendas na Internet (sim, houve um tempo que n√£o existia a Internet :smile:).

Processos de transa√ß√£o de tempo real (OLTP - On-Line Transaction Process) e processos anal√≠ticos em tempo real (OLAP - On-Line Analitical Process) atigem maturidade atrav√©s de muitos neg√≥cios utilizando pontos de venda.

<img src = "https://miro.medium.com/max/3144/1*kDxyqz9MqDuFb5AyYu53AA.png">

Em resumo, podemos dizer que OLTP armazena dados transacionais. Ou seja, as opera√ß√µes di√°rias do neg√≥cio. Geralmente, o sistema da empresa, dados como a venda dos produtos, a ficha t√©cnica de um produto, uma transa√ß√£o financeira. 

J√° o OLAP tende a consolidar dados hist√≥ricos para demonstra√ß√£o e visualiza√ß√µes anal√≠ticas. 

Voc√™ pode ficar na d√∫vida do melhor modelo, isso √© bem comum viu. Mas deixa te contar, n√£o existe um modelo melhor. Eles servem para objetivos diferentes, ent√£o depende do problema a ser resolvido, um ou outro ser√° utilizado. 

Parece muita coisa n√©, mas eu tenho certeza que no ao final do m√≥dulo, esta sopa de letrinhas ficar√° muito mais clara para voc√™.

Recapitulando para voc√™ n√£o se perder, ok? :bulb:

* Partimos de fichas e registros individuais at√© a organiza√ß√£o em arquivos.
* Come√ßamos a estruturar e indexar estes dados.
* Seguimos com o modelo relacional, lembra do Edgar Codd, n√©?
* Chegamos no modelo Entidade-Relacionamento do Dr. Peter Chen!
* Victory üí™! SQL se torna um padr√£o mundial.
* At√© aqui, nossos dados est√£o de certa forma "isolados" dentro nosso ambiente corporativo.

Depois vem o :boom: boom da internet. Os dados come√ßam a circular e precisamos repensar o modo de armazenar, transitar e dar seguran√ßa a estes dados.

Os dados come√ßam a ser cruzados. Do ponto de vista de um neg√≥cio, tenho vendas presenciais e OnLine. Posso tamb√©m ter v√°rias lojas, como consolidar as vendas e o estoque de todas elas? 

Al√©m disso, meus clientes est√£o indo pra internet. Por que n√£o sugerir produtos com base em suas prefer√™ncias? Vai dizer que nunca pensou sobre isso? Voc√™ pesquisa sobre algo na internet e logo ap√≥s, como num passe de m√°gica, chuva de ofertas sobre o produto que voc√™ pesquisou!

A quest√£o √© que isso gera um volume incalcul√°vel de dados. Se antes eu tinha um "controle" do meu volume de dados e que tipo de informa√ß√£o seria armazenada no meu Banco de dados, quanto inclu√≠mos a "Internet", as coisas mudarem completamente.

Quais as tend√™ncias :confused: ‚ùì

Sistemas gigantescos (na casa dos Terabytes) j√° s√£o realidade e novos recursos s√£o necess√°rios para manipula√ß√£o e an√°lise dos dados.

Data mining(minera√ßa√µ de dados), Data WareHouse, Data Marts, Data Lake s√£o t√©cnicas atualmente utilizados. Sistemas de compras inteligentes e recomenda√ß√µes baseadas em dados. Isso sem falar nos Chatbots e Metaverso.

Ufa! Bastante conte√∫do te√≥rico. Mas √© importante refletir e pensar sobre a evolu√ß√£o e de que como chegamos at√© aqui. 

## Bancos relacionais

Eu tenho certeza que voc√™ j√° ouviu falar de Bancos relacionaios e bancos n√£o relacionais. Esse assunto esta cada vez mais em foco e entender claramente a diferen√ßa entre eles vai te diferenciar como um profissional de dados.

**O que √© um banco relacional** ‚ùì

Podemos considerar como banco relacional o armazenamento e a estrutura de qualquer sistema. Seja ele de gest√£o financeira, cadastro de clientes, cadastro de funcion√°rios, cadasrto de cursos ou qualquer outra aplica√ß√£o que possa pensar. O importante √© compreender que neste mundo informatizado eles s√£o fundamentais para o funcionamento dos programas. 

A depender de sua arquitetura e finalidade, os dados armazenados podem ser acessados e compartilhados entre outros bancos de dados.

O modelo relacional armazena dados estruturados. Cada um dos campos √© planejado antes, seja em rela√ß√£o ao nome da coluna (idade, por exemplo), o tipo de dados (num√©rico) e se o campo √© obrigat√≥rio ou pode ficar em branco (nulo).

Em um banco de dados relacional, caad linha na tabela √© um registro com uma ID exclusiva chamada chave. As colunas da tabela cont√™m atributos dos dados e cada registro tem um √∫nico valor para cada um destes atributos, facilitando o estabelecimento das rela√ß√µes entre os pontos de dados.

Por exemplo, uma tabela que armazene os cursos oferecidos por nossa escola. Cada linha representa um curso e cada um deles deve receber uma chave √∫nica. Algo semelhante a estrutura abaixo poderia ser a tabela de cursos.

<img src="./imagens/diagramaCursos.png">

Esta primeira tabela tem os dados do curso, de forma que cada registro incluir o nome do curso, o professor e se o curso est√° ativo ou n√£o. Cada um dos atributos recebe uma coluna espec√≠fica e o banco de dados atribui uma ID √∫nica (uma chave) a cada linha.

Uma segunda tabela, nosso cadastro de professores cont√©m o nome, dados de contato e um ID exclusivo. 

<img src="./imagens/diagramaProfessor.png">

Estas duas tabelas t√™m uma coisa em comum, alguma sugest√£o ‚ùì 

A coluna id_professor √© um atributo das duas tabelas. Mas por causa dessa coluna em comum, o banco de dados relacional pode criar uma rela√ß√£o entre as duas tabelas. Dessa forma, quando nossa aplica√ß√£o requistar o cadastro de um curso, atrav√©s do c√≥digo do professor, teremos acesso a suas informa√ß√µes de contato.

O modelo relacional √© o melhor em manter a consist√™ncia de dados. Por exemplo, quando um cliente deposita dinheiro em um caixa eletr√¥nico e analisa o saldo da conta em um celular, o cliente espera ver esse dep√≥sito refletido imediatamente em um saldo atualizado da conta. Os bancos de dados relacionais se destacam nesse tipo de consist√™ncia de dados, garantindo que v√°rias inst√¢ncias de um banco de dados tenham os mesmos dados o tempo todo.

Os bancos de dados relacionais lidam com regras e pol√≠ticas de neg√≥cios em um n√≠vel muito granular, com pol√≠ticas r√≠gidas sobre compromisso (isto √©, fazer uma altera√ß√£o no banco de dados permanente). Por exemplo, considere um banco de dados de invent√°rio que rastreie tr√™s pe√ßas que s√£o sempre usadas juntas. Quando uma pe√ßa √© retirada do invent√°rio, as outras duas tamb√©m devem ser retiradas. Se uma das tr√™s partes n√£o estiver dispon√≠vel, nenhuma das partes deve ser retirada - todas as tr√™s partes devem estar dispon√≠veis antes que o banco de dados assuma qualquer compromisso. Um banco de dados relacional n√£o assumir√° o compromisso por uma pe√ßa at√© que saiba que pode confirmar todas as tr√™s. Essa capacidade de compromisso multifacetada √© chamada atomicidade. A atomicidade √© a chave para manter os dados precisos no banco de dados e garantir que eles estejam em conformidade com regras, regulamentos e pol√≠ticas da empresa.

Quatro propriedades essenciais definem as transa√ß√µes do banco de dados relacional: atomicidade, consist√™ncia, isolamento e durabilidade, normalmente denominados ACID.


**A atomicidade** define todos os elementos que comp√µem uma transa√ß√£o completa do banco de dados.

**A consist√™ncia** define as regras para manter os pontos de dados em um estado correto ap√≥s uma transa√ß√£o.

**O isolamento** mant√©m o efeito de uma transa√ß√£o invis√≠vel para outras pessoas at√© ser confirmada, para evitar confus√£o.

**A durabilidade** garante que as altera√ß√µes de dados se tornem permanentes quando a transa√ß√£o for confirmada.

<img src = "https://i.pinimg.com/originals/1a/57/20/1a57203e8602ea322f3cc6a5f9e21f44.jpg">

##  Bancos n√£o relacionais

Tamb√©m conhecidos como Bancos NoSQL, o banco de dados n√£o relacional √© uma forma de processar e organizar um grande volume de dados sem a necessidade de uma estrutura√ß√£o pr√©via. 

Diferente do que estudamos no m√≥dulo anterior, os bancos n√£o relacionais n√£o possuem uma estrutura r√≠gida e estruturada. 

Atualmente, os bancos NoSQL se destacam nos cen√°rios de grande volume de dados, especialmente quando relacionado √† nuvem, dispositivos m√≥veis e big data.

OS bancos NoSQL contam com estruturas variadas e organiza√ß√µes sob medida.

Desta forma, eles n√£o se limitam ao modelo de estrutura√ß√£o de dados fixos. 

Atualmente temos quatro modelos que se destacam nas principais aplica√ß√µes no mercado.

**1. Chave-valor**

Como o pr√≥prio nome sugere, o formato chave-valor realiza o pareamento dos dados a partir das chaves e valores a partir da tabela de hash. Este banco de dados de costume ser utilizado quando as chaves identificadas e os valores associados n√£o s√£o.

Armazena um conjunto de dados, seja ele simples ou complexo, identificados por um identificador exclusivo. Apresenta um bom desempenho em aplica√ß√µes na nuvem. 

Uso mais comum em sess√µes de usu√°rio, cache e carrinhos de compra.

**Casos de uso:** Twitter, Github, Stakeoverflow entre outros.

<img src = "https://blog.debugeverything.com/wp-content/uploads/2021/04/banco-de-dados-key-value-exemplo.png">

**2. Documento**

Uma base de dados orientada a documento gerencia um conjunto de campos com chaves e valores em uma entidade referida como documento. Estes dados armazenam normalmente dados na forma de documentos JSON.

Cada campo referencia um valor que pode ser expresso de v√°rias maneiras, como um n√∫mero, um objeto, array, uma string ou um outro documento. Os dados nos campos de um documento podem ser codificados de v√°rias maneiras, incluindo XML, YAML, JSON, BSON, ou at√© mesmo armazenados como texto simples.

<img src = "https://blog.debugeverything.com/wp-content/uploads/2021/04/banco-de-dados-document-stores.jpg">

Normalmente, um documento cont√©m os dados completos de uma entidade. Os itens que constituem uma entidade s√£o espec√≠ficos da aplica√ß√£o. Por exemplo, uma entidade pode conter os detalhes de um cliente, um pedido, ou uma combina√ß√£o de ambos.

Um √∫nico documento poderia conter informa√ß√µes que estariam espalhadas por v√°rias tabelas relacionais em um sistema de gerenciamento de banco de dados relacional (RDBMS). A base de dados do tipo documentos n√£o exige que todos os documentos tenham a mesma estrutura, esta abordagem proporciona uma grande flexibilidade.

O NoSQL mais conhecido de armazenamento de documentos √© o **MongoDB.**

Grandes empresas que usam o MongoDB. Por sua versatilidade, performance e seguran√ßa, MongoDB √© utilizado por grandes empresas como **Rede Globo, Codecademy, Google Search, Foursquare, IBM, Orange S.A., The Gap, Inc., Uber, HSBC, eBay, e Cisco**.

**3. Grafos / Gr√°fico / Graph**

O banco de dados n√£o relacional do tipo de gr√°fico utiliza um modelo baseado em n√≥s e bordas que representa os dados interconectados. Deste modo, o armazenamento fica mais complexo, por√©m igualmente mais detalhado.

Um banco de dados do tipo graph gerencia dois tipos de informa√ß√µes, n√≥s e arestas. Os n√≥s representam entidades, e as arestas especificam as rela√ß√µes entre estas entidades. Ambos, n√≥s e arestas, podem ter propriedades que fornecem informa√ß√µes sobre o n√≥ ou aresta, semelhantes as colunas em uma tabela. As arestas tamb√©m podem ter uma dire√ß√£o indicando a natureza da rela√ß√£o.

O objetivo de um armazenamento de dados do tipo graph √© permitir que uma aplica√ß√£o execute consultas que atravessam a rede de n√≥s e arestas de forma eficiente, e que permita analisar as rela√ß√µes entre entidades.

Em contraste com os bancos de dados relacionais e NoSQL, os bancos de dados do tipo graph armazenam as rela√ß√µes de dados como relacionamentos. Este armazenamento expl√≠cito de dados de relacionamento significa menos desconex√µes entre seu esquema e seu banco de dados real.

Na verdade, a flexibilidade do modelo de grafos permite adicionar novos n√≥s e relacionamentos sem comprometer sua rede existente ou migrar seus dados de forma demorada. Todos os seus dados e relacionamentos originais permanecem intactos.

O grafo a seguir √© um exemplo de grafo de rede social. Considerando as pessoas (n√≥s) e seus relacionamentos (arestas), √© poss√≠vel descobrir quem s√£o os ‚Äúamigos dos amigos‚Äù de uma pessoa espec√≠fica, por exemplo, os amigos dos amigos de Howard. 

<img src = "https://d1.awsstatic.com/diagrams/foaf-graph.e5e42865e0ee97a2972f9014d28f525ef68a981b.png">

Como exemplo, os bancos de dados de grafos podem fazer uma preven√ß√£o sofisticada contra fraudes. Com os bancos de dados de grafos, voc√™ pode usar relacionamentos para processar transa√ß√µes financeiras e de compras praticamente em tempo real. Com consultas de grafos r√°pidas, voc√™ pode detectar, por exemplo, se um poss√≠vel comprador est√° usando o mesmo endere√ßo de e-mail e cart√£o de cr√©dito que o usado em um caso de fraude conhecido. Os bancos de dados de grafos tamb√©m podem ajud√°-lo a detectar facilmente padr√µes de relacionamento, como v√°rias pessoas associadas a um endere√ßo de e-mail pessoal ou v√°rias pessoas compartilhando o mesmo endere√ßo IP, mas residentes em endere√ßos f√≠sicos diferentes. 

Os bancos de dados de grafos s√£o uma boa op√ß√£o para aplicativos de recomenda√ß√£o. Com os bancos de dados de grafos, voc√™ pode armazenar em um grafo os relacionamentos entre as categorias de informa√ß√£o, como os interesses, os amigos e o hist√≥rico de compras dos clientes. Voc√™ pode usar um banco de dados de grafos altamente dispon√≠vel para fazer recomenda√ß√µes de produtos a um usu√°rio com base em quais produtos foram comprados por outras pessoas que seguem o mesmo esporte e t√™m hist√≥rico de compras similar. Al√©m disso, √© poss√≠vel identificar pessoas com um amigo em comum, mas que ainda n√£o se conhecem, para fazer uma recomenda√ß√£o de amizade. 

fonte: https://aws.amazon.com/pt/nosql/graph/

**4. Colunar (Wide column)**

Por fim, colunar costuma se destacar por o tipo de dados de uma coluna larga, que permite a identifica√ß√£o dos dados de fam√≠lias de colunas. Os bancos de dados colunares, como o Amazon Redshift e o Google BigQuery, armazenam a informa√ß√£o coluna-a-coluna, o que permite:

- Maior compress√£o ‚Äì j√° que dados de tipos iguais s√£o armazenados juntos, h√° uma otimiza√ß√£o de espa√ßo utilizado
- Elimina√ß√£o da necessidade de √≠ndices
- Alta-performance para opera√ß√µes de agrega√ß√£o

Os bancos de dados colunares dispon√≠veis no mercado desenvolveram outras otimiza√ß√µes para melhoria de performance, o que os torna ideiais para times de analytics que precisam lidar com grandes bases de dados ‚Äì principalmente otimiza√ß√£o de cruzamentos entre tabelas.

